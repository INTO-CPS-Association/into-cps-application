<div *ngIf="!online" class="alert alert-danger">
    Co-Simulation Engine offline. No connection at {{url}}.
    <button type="button" class="btn btn-sm btn-default" (click)="onCoeLaunchClick()"><span class="glyphicon glyphicon-link"></span> Launch</button>
</div>
<div *ngIf="online" class="alert alert-success">
    Co-Simulation Engine, version {{version}}, online at {{url}}.
</div>

<div *ngIf="mmWarnings.length > 0">
    <strong>The multi model configuration is not valid.</strong>
    <div *ngFor="let warning of mmWarnings" class="alert alert-warning">{{warning.message}}</div>
</div>

<div *ngIf="coeWarnings.length > 0">
    <strong>The co simulation configuration is not valid. It can be re-generated by editing and saving.</strong>
    <div *ngFor="let warning of coeWarnings" class="alert alert-warning">{{warning.message}}</div>
</div>

<div class="form-group">
    <div *ngIf="!simulating">
        <button type="button" [disabled]="!canRun()" (click)="runSimulation()" class="btn btn-default">
        <span class="glyphicon glyphicon-play"></span>Simulate</button>
    </div>
    <div *ngIf="simulating">
        <button type="button" (click)="stopSimulation()" class="btn btn-default">
        <span class="glyphicon glyphicon-stop"></span>Stop</button>
    </div>
</div>

<div class="progress">
    <div class="progress-bar" [style.width]="coeSimulation.progress + '%'" style="min-width: 2em">
        {{coeSimulation.progress}}%
    </div>
</div>

<div *ngIf="hasHttpError" class="alert alert-danger">
    {{httpErrorMessage}}
</div>

<div *ngIf="coeSimulation.graph.getInternalGraphs().length >0" [style.-webkit-column-count]="config.liveGraphColumns" [style.-moz-column-count]="config.liveGraphColumns" [style.column-count]="config.liveGraphColumns">
    <div *ngFor="let g of coeSimulation.graph.getInternalGraphs(); let i=index; trackBy:customTrackBy">

        <div style="page-break-inside:avoid !important;border-style: solid; margin: 2px;padding-left: 2px; border-width: 0.1em;">
            <h5>Graph {{i+1}}: {{g.title}}</h5>

            <line-chart *ngIf="coeSimulation.graph.getDataset(g).getValue().length > 0" [datasets]="coeSimulation.graph.getDataset(g)" [livegraphvisiblerowcount]="config.liveGraphVisibleRowCount" [something]="config.liveGraphColumns" [finished]="coeSimulation.graph.finished"  style="page-break-inside:avoid !important;"></line-chart>
        </div>
    </div>
</div>

<div *ngIf="hasPostScriptOutput">

    <div class="panel panel-default">
        <div class="panel-heading">Post-script output</div>
        <div class="panel-body" style="white-space: pre-line">
            <div *ngIf="hasPostScriptOutputError" class="alert alert-danger">
                <p class="form-control-static">{{postScriptOutput}}</p>
            </div>
            <div *ngIf="!hasPostScriptOutputError" class="alert alert-info">
                <p class="form-control-static">{{postScriptOutput}}</p>
            </div>
        </div>
    </div>
</div>